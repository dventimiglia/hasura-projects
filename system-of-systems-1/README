# -*- mode: org; -*-

#+STARTUP: indent

#+begin_src mongo :db sample_db :host localhost :port 27011 :user mongo :password "mongo" :mongoexec mongosh
  use sample_db;
  db.approvals.find();
#+end_src

#+RESULTS:
#+begin_example
test> switched to db sample_db
sample_db> [
  {
    _id: ObjectId('660f069a52a6563e6ff4c570'),
    design_id: 1,
    approved: true
  },
  {
    _id: ObjectId('660f069a52a6563e6ff4c571'),
    design_id: 2,
    approved: true
  },
  {
    _id: ObjectId('660f069a52a6563e6ff4c572'),
    design_id: 3,
    approved: true
  },
  {
    _id: ObjectId('660f069a52a6563e6ff4c573'),
    design_id: 4,
    approved: true
  },
  {
    _id: ObjectId('660f069a52a6563e6ff4c574'),
    design_id: 5,
    approved: true
  },
  {
    _id: ObjectId('660f069a52a6563e6ff4c575'),
    design_id: 6,
    approved: true
  }
]
sample_db> 
#+end_example

#+begin_src mongo :db sample_db :host localhost :port 27011 :user mongo :password "mongo" :mongoexec mongosh
  use sample_db;
  db.approvals.updateOne(
      {
          _id: ObjectId("660f069a52a6563e6ff4c570")
      },
      {
          $set: {
              "approved":
              false
          }
      }
  )
#+end_src

#+RESULTS:
: test> switched to db sample_db
: sample_db> ... ... ... ... ... ... ... ... ... ... {
:   acknowledged: true,
:   insertedId: null,
:   matchedCount: 1,
:   modifiedCount: 1,
:   upsertedCount: 0
: }
: sample_db> 

#+begin_src mongo :db sample_db :host localhost :port 27011 :user mongo :password "mongo" :mongoexec mongosh
  use sample_db;
  db.approvals.findOne({_id: ObjectId("660dd496fd7ec80224bef349")});
#+end_src

#+RESULTS:
: test> switched to db sample_db
: sample_db> {
:   _id: ObjectId('660dd496fd7ec80224bef349'),
:   design_id: 6,
:   approved: false
: }
: sample_db> 
